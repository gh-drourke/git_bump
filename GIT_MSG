- refactor: moved testing in function main to functions called by main
